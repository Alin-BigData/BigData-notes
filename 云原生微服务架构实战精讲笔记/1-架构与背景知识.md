# 架构与背景知识

**微服务架构的核心思想是把应用按照功能划分成多个独立的服务，每个服务都是独立运行的应用。**

## 什么是微服务架构

### 单体应用的问题

- **第1个问题是单体应用过于复杂，超出了单个开发人员的理解能力。**

  在 Java 代码中，我们可以很容易地调用其他组件中的接口和类的方法，从而在不同组件之间有意或无意的引入依赖。所产生的结果就是单体应用中不同组件之间的**依赖关系非常复杂。**

- **第 2 个问题是缓慢的开发速度。**

  当应用变得复杂时，开发人员则需要花费更多的时间来理解所做的改动对已有代码的潜在影响。经常遇到的情况有，一个看似很小的改动，会对应用造成很大的影响。

- **第3个问题是应用的拓展变得困难。**

  拓展分为横行和纵向，垂直扩展的做法是增加单个应用实例所能使用的资源，这导致的问题是不同组件对资源需求的冲突，有些组件对内存的消耗较大，而另外一些组件对 CPU 的要求高。水平扩展的做法是增加应用的实例数量。

- **第 4 个问题是新版本更新上线的速度变慢。**

- **第 5 个问题是整个应用的稳定性变差。**

- **第 6 个问题是技术栈的选型和更新变得困难。**

  不同组件由于需求的不同，有它最适合的技术栈。强制使用单一技术栈，无疑会对开发效率产生影响，一旦技术栈选型确定之后，要对它进行更新是一件非常困难的事情，整个应用都可能受到影响。

  

### 微服务架构的特征

- **微服务架构使用服务作为组件化的单元。**

  在微服务架构中，组件的单元变成了服务，服务运行在独立的进程中，不能通过直接的方法调用来访问，而需要使用类似HTTP这样的进程间通信方式，每个服务可以独立部署，使用API规范来描述其公开接口。一个微服务只能通过 API 访问另外的微服务，并不能访问内部的实现代码。

  ![image-20200423185322723](/Users/wangfulin/github/image/云原生微服务学习笔记/image-20200423185322723.png)

- **微服务架构的开发团队围绕业务能力来组织。**

  微服务架构的开发团队以服务为单元来组织，每个服务与特定的业务需求相对应。

- **微服务架构使用去中心化的管理模式。**

- **微服务架构中的服务都可以独立部署。**

  这就意味着每个服务在实现时可以选择最适合的技术栈，只需要满足服务的 API 契约即可。

- **微服务架构使用去中心的数据存储。**

- **微服务架构强调基础设施的自动化。**

- 微服务架构在设计时充分考虑到失败的情况。

  

- 